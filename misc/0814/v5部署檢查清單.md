# v5 升級部署檢查清單

## 測試環境驗證 ✓
- [ ] index-v5-test.html 正常載入
- [ ] 成功檢測到 Lightweight Charts v5
- [ ] FVGRendererV5 正確初始化
- [ ] 測試按鈕功能正常

## 功能測試 ✓
- [ ] FVG矩形正確顯示（非三條線）
- [ ] 縮放時矩形保持完整
- [ ] 時間軸縮放穩定
- [ ] 價格軸縮放穩定
- [ ] 極端縮放無崩潰

## 性能測試 ✓
- [ ] 10個FVG渲染流暢
- [ ] 50個FVG渲染流暢
- [ ] 100個FVG渲染可接受
- [ ] 無記憶體洩漏跡象

## 兼容性測試 ✓
- [ ] 所有時間框架(M1-D1)正常切換
- [ ] 播放功能正常
- [ ] 左側指標面板正常
- [ ] 隨機日期功能正常
- [ ] 畫線功能正常

## 降級機制 ✓
- [ ] v5載入失敗時自動回退v4
- [ ] 回退後功能正常
- [ ] 錯誤訊息清晰

## 部署準備 ✓
- [ ] 所有備份檔案就位
- [ ] 測試環境穩定運行30分鐘
- [ ] 無控制台錯誤
- [ ] 團隊成員已通知

---

## 部署命令

### Windows (PowerShell/CMD):
```cmd
# 備份當前生產版本
copy src\frontend\index-v2.html src\frontend\index-v2-backup-%date%.html

# 部署v5版本
copy src\frontend\index-v5-test.html src\frontend\index-v2.html

# 驗證
dir src\frontend\index*.html
```

### macOS/Linux:
```bash
# 備份當前生產版本
cp src/frontend/index-v2.html "src/frontend/index-v2-backup-$(date +%Y%m%d).html"

# 部署v5版本
cp src/frontend/index-v5-test.html src/frontend/index-v2.html

# 驗證
ls -la src/frontend/index*.html
```

## 部署後驗證

1. 清除瀏覽器快取
2. 訪問 http://localhost:8080/index-v2.html
3. 檢查版本顯示為 "LWC v5.x"
4. 執行快速功能測試
5. 監控30分鐘

## 回滾程序

如果發現問題：
```cmd
# Windows
copy src\frontend\index-v2-backup.html src\frontend\index-v2.html

# macOS/Linux
cp src/frontend/index-v2-backup.html src/frontend/index-v2.html
```

## 成功標準

- ✅ 所有功能正常運作
- ✅ FVG縮放問題完全解決
- ✅ 性能優於或等同於v4版本
- ✅ 無新增bug或錯誤

---

*最後更新: 2025-08-14*
*準備部署人: Claude Code*